(this.webpackJsonpirenic=this.webpackJsonpirenic||[]).push([[0],{39:function(e,t,a){e.exports=a.p+"static/media/login-irenic.f5c45a13.svg"},40:function(e,t,a){e.exports=a.p+"static/media/loginpage.47ab12a0.svg"},43:function(e,t,a){e.exports=a.p+"static/media/irenic.66e07cdc.svg"},45:function(e,t,a){e.exports=a(94)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),l=a.n(c),i=(a(50),a(51),a(3)),s=Object(n.createContext)({}),o=function(e){var t=e.children,a=Object(n.useState)(),c=Object(i.a)(a,2),l=c[0],o=c[1];return r.a.createElement(s.Provider,{value:{user:l,setUser:o}},t)},u=(a(52),a(39)),m=a.n(u),p=a(40),d=a.n(p),E=a(6),f=a.n(E),v=a(10),g=a(41),h=a.n(g),b=a(42),w=a(19),j=Object(b.setupCache)({maxAge:9e5}),O=h.a.create({adapter:j.adapter}),N=new w.a,x="http://localhost:3000"===window.location.origin?"http://localhost:8000":window.location.origin;function y(){return(y=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.get("token")){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,O.get("".concat(x,"/auth/user"),{withCredentials:!0});case 8:return t=e.sent,e.abrupt("return",t.data);case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=Object(v.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.email,r=t.password,e.prev=1,e.next=4,O({maxRedirects:0,method:"post",url:"".concat(x,"/auth"),data:{email:n,username:a,password:r}});case 4:if(400!==(c=e.sent).status){e.next=9;break}return e.abrupt("return",[{message:c.data}]);case 9:if(200!==c.status){e.next=13;break}return(new w.a).set("token",c.data,{path:"/"}),e.abrupt("return",c.data);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[{message:"invalid username or password"}]);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function S(e){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({maxRedirects:0,method:"post",url:"".concat(x,"/auth/posts"),data:t,withCredentials:!0});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function P(){return(P=Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({maxRedirects:0,method:"get",url:"".concat(x,"/auth/posts")});case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var L=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useRef)(null),s=Object(n.useRef)(null);return r.a.createElement("form",{className:"login"},r.a.createElement("img",{src:m.a,alt:""}),Array.isArray(a)?a.map((function(e,t){return r.a.createElement("p",{key:t},e.message)})):"",r.a.createElement("div",{className:"form-section"},r.a.createElement(R,{label:"email/username",valueref:l}),r.a.createElement(R,{label:"password",type:"password",valueref:s})),r.a.createElement("button",{onClick:function(e){var t,a;e.preventDefault();var n=null===(t=l.current)||void 0===t?void 0:t.value,r=null===(a=s.current)||void 0===a?void 0:a.value;if(n&&r){var i=function(e){"string"===typeof e?window.location.reload():c(e)};!function(e){if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e))return!0;return!1}(n)?k({username:n,password:r}).then(i):k({email:n,password:r}).then(i)}}},"Log in"),r.a.createElement("span",{onClick:function(){window.location.pathname="/account"}},"sign up"))},R=function(e){var t=e.label,a=e.type,c=void 0===a?"text":a,l=e.id,s=e.valueref,o=(e.invalidmessage,e.required),u=s,m=Object(n.useRef)(null),p=Object(n.useState)(!1),d=Object(i.a)(p,2),E=d[0],f=d[1];return Object(n.useEffect)((function(){var e=function(){f(!0)},t=function(){var e;(null===u||void 0===u||null===(e=u.current)||void 0===e?void 0:e.value)||f(!1)};try{var a,n;null===u||void 0===u||null===(a=u.current)||void 0===a||a.addEventListener("focus",e),null===u||void 0===u||null===(n=u.current)||void 0===n||n.addEventListener("blur",t)}catch(r){}return function(){try{var a,n;null===u||void 0===u||null===(a=u.current)||void 0===a||a.removeEventListener("focus",e),null===u||void 0===u||null===(n=u.current)||void 0===n||n.removeEventListener("blur",t)}catch(r){}}}),[]),r.a.createElement("div",{className:"input-text"},r.a.createElement("span",{ref:m,id:E?"infocus":""},t,o?" *":""),r.a.createElement("input",{ref:u,type:c,id:l||t}))};var F=function(){return Object(n.useEffect)((function(){document.title="irenic | Login"}),[]),r.a.createElement("div",{className:"login-page"},r.a.createElement(L,null),r.a.createElement("img",{src:d.a,alt:""}))},T=a(14),H=a(1),A=(a(87),a(88),function(){return r.a.createElement("div",{className:"activity-box topics"},r.a.createElement("header",null,r.a.createElement("h4",null,"Topics")),r.a.createElement("div",{className:"activity-content"},r.a.createElement("div",{className:"topic"},r.a.createElement("p",null,"#SomeTopic")),r.a.createElement("div",{className:"topic"},r.a.createElement("p",null,"#SomeTopic")),r.a.createElement("div",{className:"topic"},r.a.createElement("p",null,"#SomeTopic")),r.a.createElement("div",{className:"topic"},r.a.createElement("p",null,"#SomeTopic"))))}),q=function(){return r.a.createElement("div",{className:"activity"},r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",placeholder:"search irenic.."})),r.a.createElement("div",{className:"activities"},r.a.createElement(A,null)))},B=a(43),D=a.n(B),J=function(e){var t=e.user,a=Object(H.g)(),c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],o=l[1];return Object(n.useEffect)((function(){o(a.location.pathname),a.listen((function(e){var t=e.pathname;o(t)}))}),[a]),t?r.a.createElement("div",{className:"profile-preview"},r.a.createElement("img",{src:t.profile_img,alt:"profilepicture"}),r.a.createElement("div",{className:"about"},r.a.createElement("h4",null,t.name),r.a.createElement("p",null,t.bio?t.bio:""),r.a.createElement("p",null,t.username)),r.a.createElement("img",{onClick:function(){return a.push("/settings")},style:{background:"/settings"===s?"var(--accent-color)":""},id:"settings-icon",src:"https://img.icons8.com/material-sharp/24/000000/settings.png",alt:""})):r.a.createElement(r.a.Fragment,null)},U=function(e){var t=e.to,a=e.label,c=Object(H.g)(),l=Object(n.useState)(),s=Object(i.a)(l,2),o=s[0],u=s[1];Object(n.useEffect)((function(){u(c.location.pathname),c.listen((function(e){var t=e.pathname;u(t)}))}),[c]);return r.a.createElement("div",{className:o===t?"nav-link selected-nav-link":"nav-link"},r.a.createElement(T.b,{to:t},r.a.createElement("img",{src:{Home:["https://img.icons8.com/material-outlined/24/000000/home--v2.png","https://img.icons8.com/material/24/000000/home--v5.png"],Notifications:["https://img.icons8.com/material-outlined/24/000000/appointment-reminders.png","https://img.icons8.com/material-rounded/24/000000/appointment-reminders.png"],Profile:["https://img.icons8.com/material-outlined/24/000000/user-male-circle.png","https://img.icons8.com/material/24/000000/user-male-circle--v1.png"],Settings:["https://img.icons8.com/windows/24/000000/settings.png","https://img.icons8.com/material-sharp/24/000000/settings.png"]}[a][Number(o===t)],alt:""}),r.a.createElement("span",null,a)))},W=function(){var e=Object(n.useContext)(s).user;return r.a.createElement("div",{className:"nav"},r.a.createElement("header",null,r.a.createElement("img",{src:D.a,alt:"irenic"})),r.a.createElement("div",{className:"nav-links"},r.a.createElement(U,{to:"/home",label:"Home"}),r.a.createElement(U,{to:"/notifications",label:"Notifications"}),r.a.createElement(U,{to:"/profile",label:"Profile"}),r.a.createElement(U,{to:"/settings",label:"Settings"})),r.a.createElement(J,{user:e}))},$=Object(n.createContext)({posts:[]}),I=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useCallback)((function(){(function(){return P.apply(this,arguments)})().then(s)}),[]);return Object(n.useEffect)(o,[o]),r.a.createElement($.Provider,{value:{posts:l,updatePosts:o}},t)},M=function(){var e=Object(n.useContext)($).posts;return Object(n.useEffect)((function(){document.title="irenic | Home"}),[]),r.a.createElement("div",{className:"posts"},e.length?e.map((function(e,t){return r.a.createElement(z,Object.assign({key:t},e))})):r.a.createElement("div",{className:"no-posts"},r.a.createElement("img",{src:"https://img.icons8.com/material-sharp/24/000000/activity-feed-2.png",alt:""}),r.a.createElement("span",null,"No Posts yet")))},z=function(e){var t=e.message,a=(e.created_at,e.created_by);e.children,e.vote;return r.a.createElement("div",{className:"post"},r.a.createElement("div",{className:"post-body"},r.a.createElement("img",{src:a.profile_img,alt:"img"}),r.a.createElement("div",{className:"message"},r.a.createElement("h4",null,a.username),r.a.createElement("p",null,t))),r.a.createElement("div",{className:"post-actions"},r.a.createElement("div",{className:"vote",id:"positive"},r.a.createElement("img",{src:"https://img.icons8.com/windows/24/000000/plus-math.png",alt:""})),r.a.createElement("div",{className:"vote",id:"negative"},r.a.createElement("img",{src:"https://img.icons8.com/material-two-tone/24/000000/minus--v1.png",alt:""}))))},G=function(){var e=Object(n.useContext)($).updatePosts,t=Object(n.useRef)(null),a=Object(n.useState)(0),c=Object(i.a)(a,2),l=c[0],o=c[1],u=Object(n.useContext)(s).user,m=function(){var a=Object(v.a)(f.a.mark((function a(){var n,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(l>=10&&t.current&&t.current.value&&u)){a.next=7;break}return n={message:t.current.value.trim(),created_by:{username:u.username,profile_img:u.profile_img},created_at:Date.now()},a.next=4,S(n);case 4:r=a.sent,e&&e(),r&&(t.current.value="",p());case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),p=function(){t.current&&(t.current.style.height="0px",t.current.style.height=25+t.current.scrollHeight+"px",t.current.value=t.current.value.trimStart(),t.current.value.length<=255&&o(t.current.value.length))};return Object(n.useEffect)(p),r.a.createElement("div",{className:"create-post"},r.a.createElement("form",null,r.a.createElement("img",{src:null===u||void 0===u?void 0:u.profile_img,alt:"profile_img"}),r.a.createElement("div",{className:"compose"},r.a.createElement("textarea",{maxLength:255,ref:t,onChange:p,placeholder:"what's going on?"}))),r.a.createElement("p",null,l>=10?l:r.a.createElement(r.a.Fragment,null)),r.a.createElement("button",{onClick:m,className:l>=10?"":"disabled-post"},"Post"))},K=function(){return r.a.createElement("div",{className:"feed"},r.a.createElement("header",null,r.a.createElement("h3",null,"Home")),r.a.createElement(I,null,r.a.createElement(G,null),r.a.createElement(M,null)))},Q=function(){return Object(n.useEffect)((function(){document.title="irenic | Notifications"}),[]),r.a.createElement("div",{className:"notification"},r.a.createElement("h4",null,"Title"),r.a.createElement("p",null,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Placeat reprehenderit consequatur inventore aut voluptatum a."))},V=function(){return r.a.createElement("div",{className:"notifications"},r.a.createElement("header",null,r.a.createElement("h3",null,"Notifications")),r.a.createElement("div",{className:"notification-list"},r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null),r.a.createElement(Q,null)))},X=function(){var e=Object(n.useContext)(s).user;return Object(n.useEffect)((function(){document.title="irenic | Profile"}),[]),console.log(e),r.a.createElement("div",{className:"profile"},r.a.createElement("header",null,r.a.createElement("div",{className:"profile-img"},r.a.createElement("img",{src:null===e||void 0===e?void 0:e.profile_img,alt:""})),e?r.a.createElement("div",{className:"about"},r.a.createElement("h2",null,e.name||e.username),r.a.createElement("p",null,e.email),e.github?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(e.github,"/")},"github"):r.a.createElement(r.a.Fragment,null),e.instagram?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://instagram.com/".concat(e.instagram,"/")},"instagram"):r.a.createElement(r.a.Fragment,null),e.bio?r.a.createElement("p",null,e.bio):r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null)))},Y=function(e){e.title,e.type,e.children;return r.a.createElement("div",{className:"setting"})},Z=function(){Object(n.useContext)(s).user;var e=Object(n.useState)(0),t=Object(i.a)(e,2);t[0],t[1];return Object(n.useEffect)((function(){document.title="irenic | Settings"}),[]),r.a.createElement("div",{className:"settings"},r.a.createElement(Y,{type:"expand",title:"change username"}),r.a.createElement(Y,{type:"expand",title:"change password"}))},ee=function(){return r.a.createElement(T.a,{basename:"/irenic"},r.a.createElement("div",{className:"home"},r.a.createElement(W,null),r.a.createElement(H.d,null,r.a.createElement(H.b,{path:"/home"},r.a.createElement(K,null),r.a.createElement(q,null)),r.a.createElement(H.b,{path:"/notifications"},r.a.createElement(V,null)),r.a.createElement(H.b,{path:"/profile"},r.a.createElement(X,null)),r.a.createElement(H.b,{path:"/settings"},r.a.createElement(Z,null))),r.a.createElement(H.b,{exact:!0,path:"/"},r.a.createElement(H.a,{to:"/home"}))))};var te=function(){var e=Object(n.useContext)(s),t=e.user,a=e.setUser;return Object(n.useEffect)((function(){(function(){return y.apply(this,arguments)})().then((function(e){a&&a(e)}))}),[]),(null===t||void 0===t?void 0:t.username)?r.a.createElement(ee,null):r.a.createElement(F,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o,null,r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.4da2ba65.chunk.js.map