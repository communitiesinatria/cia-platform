{"ast":null,"code":"import _regeneratorRuntime from\"/home/gauss/Myfolders/workspaces/cia_platform/cia-platform/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gauss/Myfolders/workspaces/cia_platform/cia-platform/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gauss/Myfolders/workspaces/cia_platform/cia-platform/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{BrowserRouter as Router,Route,Switch,useHistory}from'react-router-dom';import{register}from'./api';//styles\nimport background from'../assets/loginpage.png';import'./css/form-elements.css';import'./css/Account.css';export default function Account(){return/*#__PURE__*/React.createElement(\"div\",{className:\"account-page\"},/*#__PURE__*/React.createElement(\"img\",{src:background,alt:\"background\"}),/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/account/login\"},/*#__PURE__*/React.createElement(Login,null)),/*#__PURE__*/React.createElement(Route,{path:\"/account\"},/*#__PURE__*/React.createElement(Register,null)))));}var Login=function Login(){var history=useHistory();return/*#__PURE__*/React.createElement(\"form\",{className:\"login\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Log in\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-section\"},/*#__PURE__*/React.createElement(TextView,{label:\"email/username\"}),/*#__PURE__*/React.createElement(TextView,{label:\"password\",type:\"password\"})),/*#__PURE__*/React.createElement(\"button\",null,\"Log in\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return history.push('/account/');}},\"sign up\"));};var Register=function Register(){var history=useHistory();var email=useRef();var username=useRef();var password=useRef();var retypedpassword=useRef();var github=useRef();var instagram=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),vailditymessage=_useState2[0],setVailditymessage=_useState2[1];var sendregisterdata=function sendregisterdata(e){e.preventDefault();console.log(email.current.value);console.log(username.current.value);console.log(password.current.value);console.log(github.current.value);console.log(instagram.current.value);_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var emailv,usernamev,passwordv,githubv,instagramv,retypedpasswordv,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:emailv=email.current.value;usernamev=username.current.value;passwordv=password.current.value;githubv=github.current.value;instagramv=instagram.current.value;retypedpasswordv=retypedpassword.current.value;if(!(retypedpasswordv!==passwordv)){_context.next=10;break;}console.log(retypedpasswordv,passwordv);setVailditymessage([{message:'Passwords dont match'}]);return _context.abrupt(\"return\");case 10:_context.next=12;return register({email:emailv,username:usernamev,password:passwordv,github:githubv,instagram:instagramv});case 12:result=_context.sent;if(Array.isArray(result)){setVailditymessage(result);}else{setVailditymessage([]);// alert('check ur mail and verify ur email before loging in');\nhistory.push('/account/login');}console.log(result);case 15:case\"end\":return _context.stop();}}},_callee);}))();};return/*#__PURE__*/React.createElement(\"form\",{className:\"register\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Register\"),vailditymessage?vailditymessage.map(function(detail,i){return/*#__PURE__*/React.createElement(\"p\",{key:i},detail.message);}):'',/*#__PURE__*/React.createElement(\"div\",{className:\"form-sections\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-section\"},/*#__PURE__*/React.createElement(TextView,{label:\"email\",required:true,valueref:email}),/*#__PURE__*/React.createElement(TextView,{label:\"username\",required:true,valueref:username}),/*#__PURE__*/React.createElement(TextView,{label:\"password\",required:true,type:\"password\",valueref:password})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-section\"},/*#__PURE__*/React.createElement(TextView,{label:\"github username\",valueref:github}),/*#__PURE__*/React.createElement(TextView,{label:\"instagram username\",valueref:instagram}),/*#__PURE__*/React.createElement(TextView,{required:true,label:\"re-type password\",type:\"password\",valueref:retypedpassword}))),/*#__PURE__*/React.createElement(\"button\",{onClick:sendregisterdata},\"Register\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return history.push('/account/login');}},\"Log in\"));};var TextView=function TextView(_ref2){var label=_ref2.label,_ref2$type=_ref2.type,type=_ref2$type===void 0?'text':_ref2$type,id=_ref2.id,valueref=_ref2.valueref,invalidmessage=_ref2.invalidmessage,required=_ref2.required;var inputDom=valueref;var labelDom=useRef();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),focus=_useState4[0],setfocus=_useState4[1];useEffect(function(){var onfocus=function onfocus(){setfocus(true);};var onblur=function onblur(){if(!inputDom.current.value)setfocus(false);};try{inputDom.current.addEventListener('focus',onfocus);inputDom.current.addEventListener('blur',onblur);}catch(error){}var onchange=function onchange(){};return function(){try{inputDom.current.removeEventListener('focus',onfocus);// eslint-disable-next-line\ninputDom.current.removeEventListener('blur',onblur);}catch(e){}};},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"input-text\"},/*#__PURE__*/React.createElement(\"span\",{ref:labelDom,id:focus?'infocus':''},label,required?' *':''),/*#__PURE__*/React.createElement(\"input\",{onChange:onchange,ref:inputDom,type:type,id:id?id:label}));};","map":{"version":3,"sources":["/home/gauss/Myfolders/workspaces/cia_platform/cia-platform/client/src/Components/Account.jsx"],"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Route","Switch","useHistory","register","background","Account","Login","history","push","Register","email","username","password","retypedpassword","github","instagram","vailditymessage","setVailditymessage","sendregisterdata","e","preventDefault","console","log","current","value","emailv","usernamev","passwordv","githubv","instagramv","retypedpasswordv","message","result","Array","isArray","map","detail","i","TextView","label","type","id","valueref","invalidmessage","required","inputDom","labelDom","focus","setfocus","onfocus","onblur","addEventListener","error","onchange","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  useHistory,\n} from 'react-router-dom';\n\nimport { register } from './api';\n\n//styles\nimport background from '../assets/loginpage.png';\nimport './css/form-elements.css';\nimport './css/Account.css';\n\nexport default function Account() {\n  return (\n    <div className=\"account-page\">\n      <img src={background} alt=\"background\" />\n      <Router>\n        <Switch>\n          <Route path=\"/account/login\">\n            <Login />\n          </Route>\n          <Route path=\"/account\">\n            <Register />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nconst Login = () => {\n  const history = useHistory();\n  return (\n    <form className=\"login\">\n      <h1>Log in</h1>\n\n      <div className=\"form-section\">\n        <TextView label=\"email/username\" />\n        <TextView label=\"password\" type=\"password\" />\n      </div>\n\n      <button>Log in</button>\n      <span onClick={() => history.push('/account/')}>sign up</span>\n    </form>\n  );\n};\nconst Register = () => {\n  const history = useHistory();\n\n  const email = useRef();\n  const username = useRef();\n  const password = useRef();\n  const retypedpassword = useRef();\n  const github = useRef();\n  const instagram = useRef();\n\n  const [vailditymessage, setVailditymessage] = useState([]);\n\n  const sendregisterdata = (e) => {\n    e.preventDefault();\n    console.log(email.current.value);\n    console.log(username.current.value);\n    console.log(password.current.value);\n    console.log(github.current.value);\n    console.log(instagram.current.value);\n\n    (async () => {\n      const emailv = email.current.value;\n      const usernamev = username.current.value;\n      const passwordv = password.current.value;\n      const githubv = github.current.value;\n      const instagramv = instagram.current.value;\n      const retypedpasswordv = retypedpassword.current.value;\n\n      if (retypedpasswordv !== passwordv) {\n        console.log(retypedpasswordv, passwordv);\n        setVailditymessage([{ message: 'Passwords dont match' }]);\n        return;\n      }\n      const result = await register({\n        email: emailv,\n        username: usernamev,\n        password: passwordv,\n        github: githubv,\n        instagram: instagramv,\n      });\n\n      if (Array.isArray(result)) {\n        setVailditymessage(result);\n      } else {\n        setVailditymessage([]);\n        // alert('check ur mail and verify ur email before loging in');\n        history.push('/account/login');\n      }\n      console.log(result);\n    })();\n  };\n\n  return (\n    <form className=\"register\">\n      <h1>Register</h1>\n      {vailditymessage\n        ? vailditymessage.map((detail, i) => <p key={i}>{detail.message}</p>)\n        : ''}\n      <div className=\"form-sections\">\n        <div className=\"form-section\">\n          <TextView label=\"email\" required valueref={email} />\n          <TextView label=\"username\" required valueref={username} />\n          <TextView\n            label=\"password\"\n            required\n            type=\"password\"\n            valueref={password}\n          />\n        </div>\n\n        <div className=\"form-section\">\n          <TextView label=\"github username\" valueref={github} />\n          <TextView label=\"instagram username\" valueref={instagram} />\n          <TextView\n            required\n            label=\"re-type password\"\n            type=\"password\"\n            valueref={retypedpassword}\n          />\n        </div>\n      </div>\n\n      <button onClick={sendregisterdata}>Register</button>\n      <span onClick={() => history.push('/account/login')}>Log in</span>\n    </form>\n  );\n};\n\nconst TextView = ({\n  label,\n  type = 'text',\n  id,\n  valueref,\n  invalidmessage,\n  required,\n}) => {\n  const inputDom = valueref;\n  const labelDom = useRef();\n\n  const [focus, setfocus] = useState(false);\n\n  useEffect(() => {\n    const onfocus = () => {\n      setfocus(true);\n    };\n    const onblur = () => {\n      if (!inputDom.current.value) setfocus(false);\n    };\n    try {\n      inputDom.current.addEventListener('focus', onfocus);\n      inputDom.current.addEventListener('blur', onblur);\n    } catch (error) {}\n\n    const onchange = () => {};\n\n    return () => {\n      try {\n        inputDom.current.removeEventListener('focus', onfocus);\n        // eslint-disable-next-line\n        inputDom.current.removeEventListener('blur', onblur);\n      } catch (e) {}\n    };\n  }, []);\n\n  return (\n    <div className=\"input-text\">\n      <span ref={labelDom} id={focus ? 'infocus' : ''}>\n        {label}\n        {required ? ' *' : ''}\n      </span>\n      <input\n        onChange={onchange}\n        ref={inputDom}\n        type={type}\n        id={id ? id : label}\n      />\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}